#!/usr/bin/make -f

packages = $(shell ./scripts/list-dep8-packages)
start := $(shell date +%s)

.PHONY: $(packages)

all: $(packages)
	@./scripts/cleanup
	@finish=$$(date +%s); \
		./scripts/generate-index $$(($$finish - $(start)))

$(packages):
	@if test -t 1; then echo $@ ; fi
	@logger -t dep8 -i "started processing package $@"
	@./scripts/process-package $@
	@logger -t dep8 -i "finished processing package $@"
